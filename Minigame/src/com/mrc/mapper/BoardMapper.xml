<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mrc.board.controller.BoardMapper">
	<!-- 게시판조회-->
	<select id="boardListData" resultType="BoardVO">
		SELECT 
			BOARD_NO as boardNo
			,INQ_TITLE as inqTitle
			,INQ_MEM_EMAIL as inqMemEmail
			,VIEW_CNT as viewCnt
			,TO_CHAR(INQ_REG_DT,'YYYY-MM-DD') as inqRegDt
			,MI.NIC_NAME as	nicName
		FROM QA_BOARD QB,MEM_INFO MI
		WHERE QB.INQ_MEM_EMAIL = MI.EMAIL
		AND INQ_USE_YN = 'Y'
		ORDER BY INQ_REG_DT DESC
	</select>
	
	<!--댓글,상세조회  -->
	<select id="ansBoardList" parameterType="Int" resultType="BoardVO">
		SELECT 
			INQ_TITLE as inqTitle
			,INQ_CONTENT as inqContent
			,ANS_CONTENT as ansContent
			,ANS_MEM_EMAIL as ansMemEmail
			,ANS_REG_DT as ansRegDt
		FROM QA_BOARD
		WHERE ANS_USE_YN = 'Y'
		AND BOARD_NO = #{boardNo}
		ORDER BY ANS_REG_DT DESC
	</select>
	
	<!--게시판등록  -->
	<insert id="insertBoardInq" parameterType="BoardVO">
		<!-- <selectKey keyProperty="no" resultType="int" order="BEFORE">
			SELECT
			NVL(MAX(no)+1,1) as no FROM news_reply
		</selectKey> -->
		INSERT INTO QA_BOARD(BOARD_NO,INQ_TITLE,INQ_CONTENT,INQ_REG_DT,INQ_MEM_EMAIL)
		VALUES(BOARD_SEQ.NEXT_VAL,#{inqTitle},#{inqContent},sysdate,#{inqMemEmail})
	</insert>
	
	<!--게시판삭제  -->
	<update id="deleteBoardInfo" parameterType="int"> 
		UPDATE QA_BOARD
		<choose>
			<when test="1=1">
				SET INQ_USE_YN = 'N' 
			</when>
			<otherwise>
				SET ANS_USE_YN = 'N'
			</otherwise>
		</choose>
		SET INQ_USE_YN = 'N'
		WHERE BOARD_NO = #{boardNo}
	</update>
	
</mapper>